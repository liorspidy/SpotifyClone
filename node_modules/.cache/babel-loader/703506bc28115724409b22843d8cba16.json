{"ast":null,"code":"import _slicedToArray from\"C:/Users/liors/Documents/Code Projects/JS/ReactProject/spotify-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from'react';import classes from'./DefaultPage.module.css';import SpotifyWebApi from'spotify-web-api-js';import DataLayerContext from'../store/DataLayerContext';import PlaylistRow from'./PlaylistRow';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var spotify=new SpotifyWebApi();var DefaultPage=function DefaultPage(props){var ctx=useContext(DataLayerContext);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),myArtists=_useState2[0],setMyArtists=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),myTopTracks=_useState4[0],setMyTopTracks=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),myRecentTracks=_useState6[0],setMyRecentTracks=_useState6[1];useEffect(function(){if(ctx.token){spotify.getMyTopArtists().then(function(res){var artistsRow=[];for(var i=0;i<8;i++){artistsRow.push(res.items[i]);}setMyArtists(artistsRow);}).catch(function(error){return console.log(error.message);});spotify.getMyTopTracks().then(function(res){var helperArray=[];for(var i=0;i<8;i++){helperArray.push(res.items[i]);}setMyTopTracks(helperArray);}).catch(function(error){return console.log(error.message);});spotify.getMyRecentlyPlayedTracks().then(function(res){var helperArray=[];var i=0;while(helperArray.length!==8){if(res.items[i].track.name===res.items[i+1].track.name){i++;continue;}helperArray.push(res.items[i]);i++;}setMyRecentTracks(helperArray);}).catch(function(error){return console.log(error.message);});}},[ctx.token]);return/*#__PURE__*/_jsx(\"div\",{className:classes.defaultPage,children:ctx.token&&/*#__PURE__*/_jsxs(\"div\",{className:classes.row,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.rowTitles,children:[/*#__PURE__*/_jsx(\"h1\",{className:classes.headline,children:\"Your Artists\"}),/*#__PURE__*/_jsx(\"h3\",{className:classes.seeall,children:\"SEE ALL\"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.rowItems,children:/*#__PURE__*/_jsx(PlaylistRow,{playlist:myArtists,type:\"artists\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.rowTitles,children:[/*#__PURE__*/_jsx(\"h1\",{className:classes.headline,children:\"Your Top Tracks\"}),/*#__PURE__*/_jsx(\"h3\",{className:classes.seeall,children:\"SEE ALL\"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.rowItems,children:/*#__PURE__*/_jsx(PlaylistRow,{playlist:myTopTracks,type:\"topTracks\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.rowTitles,children:[/*#__PURE__*/_jsx(\"h1\",{className:classes.headline,children:\"Recently Played\"}),/*#__PURE__*/_jsx(\"h3\",{className:classes.seeall,children:\"SEE ALL\"})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.rowItems,children:/*#__PURE__*/_jsx(PlaylistRow,{playlist:myRecentTracks,type:\"recentTracks\"})})]})]})});};export default DefaultPage;","map":{"version":3,"names":["useContext","useEffect","useState","classes","SpotifyWebApi","DataLayerContext","PlaylistRow","spotify","DefaultPage","props","ctx","myArtists","setMyArtists","myTopTracks","setMyTopTracks","myRecentTracks","setMyRecentTracks","token","getMyTopArtists","then","res","artistsRow","i","push","items","catch","error","console","log","message","getMyTopTracks","helperArray","getMyRecentlyPlayedTracks","length","track","name","defaultPage","row","rowTitles","headline","seeall","rowItems"],"sources":["C:/Users/liors/Documents/Code Projects/JS/ReactProject/spotify-clone/src/pages/DefaultPage.js"],"sourcesContent":["import { useContext, useEffect, useState } from 'react';\r\nimport classes from './DefaultPage.module.css';\r\nimport SpotifyWebApi from 'spotify-web-api-js';\r\nimport DataLayerContext from '../store/DataLayerContext';\r\nimport PlaylistRow from './PlaylistRow';\r\n\r\nconst spotify = new SpotifyWebApi();\r\n\r\nconst DefaultPage = (props) => {\r\n  const ctx = useContext(DataLayerContext);\r\n  const [myArtists, setMyArtists] = useState([]);\r\n  const [myTopTracks, setMyTopTracks] = useState([]);\r\n  const [myRecentTracks, setMyRecentTracks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (ctx.token) {\r\n      spotify\r\n        .getMyTopArtists()\r\n        .then((res) => {\r\n          const artistsRow = [];\r\n          for (var i = 0; i < 8; i++) {\r\n            artistsRow.push(res.items[i]);\r\n          }\r\n          setMyArtists(artistsRow);\r\n        })\r\n        .catch((error) => console.log(error.message));\r\n\r\n      spotify\r\n        .getMyTopTracks()\r\n        .then((res) => {\r\n          const helperArray = [];\r\n          for (var i = 0; i < 8; i++) {\r\n            helperArray.push(res.items[i]);\r\n          }\r\n          setMyTopTracks(helperArray);\r\n        })\r\n        .catch((error) => console.log(error.message));\r\n\r\n      spotify\r\n        .getMyRecentlyPlayedTracks()\r\n        .then((res) => {\r\n          const helperArray = [];\r\n          var i = 0;\r\n          while (helperArray.length !== 8) {\r\n            if (res.items[i].track.name === res.items[i + 1].track.name) {\r\n              i++;\r\n              continue;\r\n            }\r\n            helperArray.push(res.items[i]);\r\n            i++;\r\n          }\r\n          setMyRecentTracks(helperArray);\r\n        })\r\n        .catch((error) => console.log(error.message));\r\n    }\r\n  }, [ctx.token]);\r\n\r\n  return (\r\n    <div className={classes.defaultPage}>\r\n      {ctx.token && (\r\n        <div className={classes.row}>\r\n          {/* <div className={classes.rowTitles}>\r\n          <h1 className={classes.headline}>Spotify Playlists</h1>\r\n          <h3 className={classes.seeall}>SEE ALL</h3>\r\n        </div>\r\n        <div className={classes.rowItems}>\r\n          <PlaylistRow playlist={[]} />\r\n        </div> */}\r\n          <div>\r\n            <div className={classes.rowTitles}>\r\n              <h1 className={classes.headline}>Your Artists</h1>\r\n              <h3 className={classes.seeall}>SEE ALL</h3>\r\n            </div>\r\n            <div className={classes.rowItems}>\r\n              <PlaylistRow playlist={myArtists} type=\"artists\" />\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <div className={classes.rowTitles}>\r\n              <h1 className={classes.headline}>Your Top Tracks</h1>\r\n              <h3 className={classes.seeall}>SEE ALL</h3>\r\n            </div>\r\n            <div className={classes.rowItems}>\r\n              <PlaylistRow playlist={myTopTracks} type=\"topTracks\" />\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <div className={classes.rowTitles}>\r\n              <h1 className={classes.headline}>Recently Played</h1>\r\n              <h3 className={classes.seeall}>SEE ALL</h3>\r\n            </div>\r\n            <div className={classes.rowItems}>\r\n              <PlaylistRow playlist={myRecentTracks} type=\"recentTracks\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DefaultPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}